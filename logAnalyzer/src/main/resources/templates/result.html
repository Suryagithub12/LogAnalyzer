<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Log Results</title>
    <link rel="stylesheet" th:href="@{/style.css}">
</head>
<body>
<h2>Total Valid Log Entries: <span th:text="${total}"></span></h2>

<h3>Device Type Count</h3>
<ul>
    <li th:each="entry : ${deviceCount}">
        <span th:text="${entry.key}">Device</span> : <span th:text="${entry.value}">0</span>
    </li>
</ul>

<h3>Operating System Count</h3>
<ul>
    <li th:each="entry : ${osCount}">
        <span th:text="${entry.key}">OS</span> : <span th:text="${entry.value}">0</span>
    </li>
</ul>

<h3>Country Distribution</h3>
<canvas id="countryChart"></canvas>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script th:inline="javascript">
    let countryData = [[${countryStats}]];
    let labels = Object.keys(countryData);
    let values = Object.values(countryData);

    new Chart(document.getElementById('countryChart'), {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{ label: 'Users by Country', data: values, backgroundColor: 'teal' }]
        }
    });
</script>

<br>
<a href="/">Upload Another File</a>
</body>
</html>
